<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="template/template.xhtml">

    <ui:define name="headerMenu">
        <h:link value="Register" outcome="register.xhtml"/>
    </ui:define>

    <ui:define name = "title">TaxiManager - Change password</ui:define>

    <ui:define name="content">
        <div class="enter_form">
            <h:form id="changePasswordForm">
                <table class="formTable">
                    <tr>
                        <td>
                            <h:outputLabel for="emailInput" value="Email:"/>
                        </td>
                        <td>
                            <h:inputText id="emailInput" value="#{changePasswordBean.email}" required="true" requiredMessage="Value is required">
                                <!--<f:validator validatorId="email-validator" />-->
                            </h:inputText>
                            <h:message class="error_message" for="emailInput" id="emailError" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel for="currentPasswordInput" value="Current password:"/>
                        </td>
                        <td>
                            <h:inputSecret id="currentPasswordInput" value="#{changePasswordBean.currentPassword}">
                                <f:validator validatorId="password-validator" />
                            </h:inputSecret>
                            <h:message class="error_message" for="currentPasswordInput" id="currrentPasswordError" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel for="newPasswordInput" value="New password:"/>
                        </td>
                        <td>
                            <h:inputSecret id="newPasswordInput" binding="#{newPasswordComponent}" value="#{changePasswordBean.newPassword}">
                                <f:validator validatorId="password-validator" />
                            </h:inputSecret>
                            <h:message class="error_message" for="newPasswordInput" id="newPasswordError" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel for="confirmNewPasswordInput" value="Repeat password:"/>
                        </td>
                        <td>
                            <h:inputSecret id="confirmNewPasswordInput" value="#{changePasswordBean.confirmNewPassword}">
                                <f:validator validatorId="confirm-password-validator" />
                                <f:attribute name="passwordComponent" value="#{newPasswordComponent}" />
                            </h:inputSecret>
                            <h:message class="error_message" for="confirmNewPasswordInput" id="confirmNewPasswordError" />
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <h:messages redisplay="false" class="error_message" id="changePasswordErrors" />
                        </td>
                    </tr>
                </table>
                <h:panelGrid columns="2" styleClass="formTable formButtonTable">
                    <h:commandButton value="Change password" action="#{changePasswordBean.changePassword}" ajax="false"/>
                    <h:button value="Back" outcome="login.xhtml"/>
                </h:panelGrid>
            </h:form>
        </div>
    </ui:define>

</ui:composition>

</html>